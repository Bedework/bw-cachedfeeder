<html>
<head>
	<title>Events@Duke Custom Feeds</title>
	<%=stylesheet_link_tag "style.css" %>
	<%=javascript_include_tag "urlBuilder.js" %>
	
	</head>
	<body onload="initBuilder()">
<h1>Custom Feeds from <a href="http://calendar.duke.edu/">Events@Duke</a></h1>
<div>
<p>The form below allows you to configure a feed from Events@Duke.  For now you must be careful not to mix calendar and list style selections.</p>
<div id="step1"><h4>Step 1</h4><p>Choose the type of feed you desire:</p>
	<select name="feedType" >
		<option value="RSS">RSS</option>
		<option value="XML">XML</option>
	</select>
</div>
<div style="display:none" id="step2"><h4>Step 2</h4><p>Would you prefer an aggregated list of events or a list of events based upon a traditional calendar?</p>
	<select name="feeStyle" >
		<option value="aggregate">Aggregated Events List</option>
		<option value="calendar">Calendar Based Events List</option>
	</select>
</div>
<div style="display:none" id="step3cal"><h4>Step 3 (Calendar List)</h4><p>Choose the calendar time frame for your events list:</p>
	<select name="viewPeriod" >
		<option value="dayView">Day</option>
		<option value="weekView">Week</option>
		<option value="monthView">Month</option>
	</select>
</div>
<div style="display:none" id="step3list"><h4>Step 3 (Aggregated List)</h4><p>Select the number of days for which you'd like to see events:</p>
	<select name="days" >
		<option value="7">7</option>
		<option value="30">30</option>
		<option value="90">90</option>
	</select>
</div>
<div style="display:none" id="step4"><h4>Step 4</h4><p>Select the level of detail required for event descriptions:</p>
	<select name="details" >
		<option value="details">Detailed</option>
		<option value="summary">Summarized</option>
	</select>
</div>
<div style="display:none" id="step5xml"><h4>Step 5 (XML)</h4><p>Select at least one or many groups to filter by:</p>
	<select multiple="multiple" name="groups" >
		<option value="agrp_NasherMuseumofArt">Nasher Museum of Art</option>
		<option value="agrp_AlumniAffairs">Alumni Affairs</option>
	</select>
</div>
<div style="display:none" id="step5rss"><h4>Step 5 (RSS)</h4><p>Select a group to filter by:</p>
	<select name="groups" >
		<option value="all">All</option>
		<option value="agrp_NasherMuseumofArt">Nasher Museum of Art</option>
		<option value="agrp_AlumniAffairs">Alumni Affairs</option>
	</select>
</div>
<div style="display:none" id="optionalStep"><h4>Optional Step (RSS)</h4><p>Select categories to filter by:</p>
	<select multiple="multiple" name="categories" >
		<option value="all">All</option>
		<option value="Meetings">Meetings</option>
	</select>
</div>

<form style="display:none" name="feeder" method="get" action="/feeder/feed/">
	<p>
		<select name="skin" >
			<option value="rss-agg-list">RSS Aggregated List</option>
			<option value="rss">RSS Calendar List</option>
			<option value="feed-list">XML Aggregated List</option>
			<option value="feed">XML Calendar List</option>
		</select>
		<label for="skin"> Skin Name</label>
	</p>
	<!-- <input type="text" name="skin" value="rss-agg-list" /><br /> -->
	<p>
	<select name="style" >
		<option value="listEvents.do">Aggregated List</option>
		<option value="setViewPeriod.do">Calendar List</option>
	</select>
	<label for="style"> Feed Style</label>
	</p>
	<p>
	<select name="days">
		<option value="1">1</option>
		<option value="45">45</option>
		<option value="90">90</option>
	</select> Days (List Style):</p>
	<p>
	<select name="viewType">
		<option value="dayView">Day</option>
		<option value="weekView">Week</option>
		<option value="monthView">Month</option>
	</select> View Type (Caledar Style) </p>
	<!-- <input type="text" name="style" value="listEvents.do" /><br /> -->
	<p>
		<input type="text" name="group" value="agrp_NasherMuseumofArt" /><label for="group"> Group </label></p>
		<input type="button" value="Go" />
</form>
<h3>Your Currently Configured Feeds</h2>

<ul><li><strong>Events@Duke Feed:</strong> <%= @dukeUrl %></li><li><strong>My Feed: </strong><%= @feederUrl %></li></ul>
<h3>Sample feed output:</h3>
<textarea rows="25" cols="100"><%= @xmlOutput %></textarea>
<p>Target URL <%= @debugInfo %></p>
</div>
<h1>Request a raw feed</h1>
<div>
<p>The form below will direct you to a raw XML feed that is suitable for subscription.</p>
<form name="feederRaw" method="get" action="/feeder/feed/raw/">
<select name="skin" >
		<option value="rss-agg-list">RSS Aggregated List</option>
		<option value="rss">RSS Calendar List</option>
		<option value="feed-list">XML Aggregated List</option>
		<option value="feed">XML Calendar List</option>
	</select>
	<!-- <input type="text" name="skin" value="rss-agg-list" /><br /> -->
	<label for="style">Feed Style: </label>
	<select name="style" >
		<option value="listEvents.do">Aggregated List</option>
		<option value="setViewPeriod.do">Calendar List</option>
	</select>
	<!-- <input type="text" name="style" value="listEvents.do" /><br /> -->
	<select name="days">
		<option value="1">1</option>
		<option value="45">45</option>
		<option value="90">90</option>
	</select>
	<select name="viewType">
		<option value="dayView">Day</option>
		<option value="weekView">Week</option>
		<option value="monthView">Month</option>
	</select>
	<label for="group">Group: </label><input type="text" name="group" value="agrp_NasherMuseumofArt" />
	<br /><input type="submit" value="Go" />
</form>
</div>
</body>
</html>